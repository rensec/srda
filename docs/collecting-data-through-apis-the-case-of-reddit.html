<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3 Collecting data through APIs: the case of Reddit | Social Research in the Digital Age (Utrecht University)</title>
  <meta name="description" content="3 Collecting data through APIs: the case of Reddit | Social Research in the Digital Age (Utrecht University)" />
  <meta name="generator" content="bookdown 0.41 and GitBook 2.6.7" />

  <meta property="og:title" content="3 Collecting data through APIs: the case of Reddit | Social Research in the Digital Age (Utrecht University)" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3 Collecting data through APIs: the case of Reddit | Social Research in the Digital Age (Utrecht University)" />
  
  
  

<meta name="author" content="Rense Corten" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="introduction-to-web-scraping-in-r.html"/>
<link rel="next" href="a-first-look-at-data-collection-via-the-bluesky-api.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>About</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#usage"><i class="fa fa-check"></i>Usage</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="a-very-short-introduction-to-r.html"><a href="a-very-short-introduction-to-r.html"><i class="fa fa-check"></i><b>1</b> A Very Short Introduction to R</a>
<ul>
<li class="chapter" data-level="1.1" data-path="a-very-short-introduction-to-r.html"><a href="a-very-short-introduction-to-r.html#introduction"><i class="fa fa-check"></i><b>1.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="a-very-short-introduction-to-r.html"><a href="a-very-short-introduction-to-r.html#what-is-r-and-why-should-you-learn-it"><i class="fa fa-check"></i><b>1.1.1</b> What is R and why should you learn it?</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="a-very-short-introduction-to-r.html"><a href="a-very-short-introduction-to-r.html#using-rstudio"><i class="fa fa-check"></i><b>1.2</b> Using RStudio</a></li>
<li class="chapter" data-level="1.3" data-path="a-very-short-introduction-to-r.html"><a href="a-very-short-introduction-to-r.html#running-code-from-the-r-script"><i class="fa fa-check"></i><b>1.3</b> Running code from the R script</a></li>
<li class="chapter" data-level="1.4" data-path="a-very-short-introduction-to-r.html"><a href="a-very-short-introduction-to-r.html#using-objects-assigning-values-to-names"><i class="fa fa-check"></i><b>1.4</b> Using objects: Assigning values to names</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="a-very-short-introduction-to-r.html"><a href="a-very-short-introduction-to-r.html#practice-problem-1"><i class="fa fa-check"></i><b>1.4.1</b> PRACTICE PROBLEM 1</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="a-very-short-introduction-to-r.html"><a href="a-very-short-introduction-to-r.html#comments"><i class="fa fa-check"></i><b>1.5</b> Comments</a></li>
<li class="chapter" data-level="1.6" data-path="a-very-short-introduction-to-r.html"><a href="a-very-short-introduction-to-r.html#installing-packages"><i class="fa fa-check"></i><b>1.6</b> Installing Packages</a>
<ul>
<li class="chapter" data-level="1.6.1" data-path="a-very-short-introduction-to-r.html"><a href="a-very-short-introduction-to-r.html#practice-problem-2"><i class="fa fa-check"></i><b>1.6.1</b> PRACTICE PROBLEM 2</a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="a-very-short-introduction-to-r.html"><a href="a-very-short-introduction-to-r.html#the-working-directory"><i class="fa fa-check"></i><b>1.7</b> The working directory</a>
<ul>
<li class="chapter" data-level="1.7.1" data-path="a-very-short-introduction-to-r.html"><a href="a-very-short-introduction-to-r.html#practice-problem-3"><i class="fa fa-check"></i><b>1.7.1</b> PRACTICE PROBLEM 3</a></li>
</ul></li>
<li class="chapter" data-level="1.8" data-path="a-very-short-introduction-to-r.html"><a href="a-very-short-introduction-to-r.html#interacting-with-the-environment"><i class="fa fa-check"></i><b>1.8</b> Interacting with the Environment</a>
<ul>
<li class="chapter" data-level="1.8.1" data-path="a-very-short-introduction-to-r.html"><a href="a-very-short-introduction-to-r.html#practice-problem-4"><i class="fa fa-check"></i><b>1.8.1</b> PRACTICE PROBLEM 4</a></li>
</ul></li>
<li class="chapter" data-level="1.9" data-path="a-very-short-introduction-to-r.html"><a href="a-very-short-introduction-to-r.html#back-to-writing-code"><i class="fa fa-check"></i><b>1.9</b> Back to writing code</a>
<ul>
<li class="chapter" data-level="1.9.1" data-path="a-very-short-introduction-to-r.html"><a href="a-very-short-introduction-to-r.html#mathematical-operators"><i class="fa fa-check"></i><b>1.9.1</b> Mathematical Operators</a></li>
<li class="chapter" data-level="1.9.2" data-path="a-very-short-introduction-to-r.html"><a href="a-very-short-introduction-to-r.html#logical-comparisons"><i class="fa fa-check"></i><b>1.9.2</b> Logical Comparisons</a></li>
</ul></li>
<li class="chapter" data-level="1.10" data-path="a-very-short-introduction-to-r.html"><a href="a-very-short-introduction-to-r.html#data-structures"><i class="fa fa-check"></i><b>1.10</b> Data structures</a>
<ul>
<li class="chapter" data-level="1.10.1" data-path="a-very-short-introduction-to-r.html"><a href="a-very-short-introduction-to-r.html#vectors"><i class="fa fa-check"></i><b>1.10.1</b> Vectors</a></li>
<li class="chapter" data-level="1.10.2" data-path="a-very-short-introduction-to-r.html"><a href="a-very-short-introduction-to-r.html#data-frames"><i class="fa fa-check"></i><b>1.10.2</b> Data frames</a></li>
<li class="chapter" data-level="1.10.3" data-path="a-very-short-introduction-to-r.html"><a href="a-very-short-introduction-to-r.html#selecting-rows-columns-and-elements-in-data-frames"><i class="fa fa-check"></i><b>1.10.3</b> Selecting rows, columns and elements in data frames</a></li>
<li class="chapter" data-level="1.10.4" data-path="a-very-short-introduction-to-r.html"><a href="a-very-short-introduction-to-r.html#practice-problem-7"><i class="fa fa-check"></i><b>1.10.4</b> PRACTICE PROBLEM 7</a></li>
</ul></li>
<li class="chapter" data-level="1.11" data-path="a-very-short-introduction-to-r.html"><a href="a-very-short-introduction-to-r.html#getting-data-into-r"><i class="fa fa-check"></i><b>1.11</b> Getting data into R</a>
<ul>
<li class="chapter" data-level="1.11.1" data-path="a-very-short-introduction-to-r.html"><a href="a-very-short-introduction-to-r.html#summarising-the-data"><i class="fa fa-check"></i><b>1.11.1</b> Summarising the data</a></li>
</ul></li>
<li class="chapter" data-level="1.12" data-path="a-very-short-introduction-to-r.html"><a href="a-very-short-introduction-to-r.html#saving-data"><i class="fa fa-check"></i><b>1.12</b> Saving data</a></li>
<li class="chapter" data-level="1.13" data-path="a-very-short-introduction-to-r.html"><a href="a-very-short-introduction-to-r.html#functions"><i class="fa fa-check"></i><b>1.13</b> Functions</a>
<ul>
<li class="chapter" data-level="1.13.1" data-path="a-very-short-introduction-to-r.html"><a href="a-very-short-introduction-to-r.html#using-functions"><i class="fa fa-check"></i><b>1.13.1</b> Using functions</a></li>
<li class="chapter" data-level="1.13.2" data-path="a-very-short-introduction-to-r.html"><a href="a-very-short-introduction-to-r.html#practice-problem-8"><i class="fa fa-check"></i><b>1.13.2</b> PRACTICE PROBLEM 8</a></li>
</ul></li>
<li class="chapter" data-level="1.14" data-path="a-very-short-introduction-to-r.html"><a href="a-very-short-introduction-to-r.html#getting-help-viewing-and-interpreting-function-documentation"><i class="fa fa-check"></i><b>1.14</b> Getting help: viewing and interpreting function documentation</a>
<ul>
<li class="chapter" data-level="1.14.1" data-path="a-very-short-introduction-to-r.html"><a href="a-very-short-introduction-to-r.html#practice-problem-9"><i class="fa fa-check"></i><b>1.14.1</b> PRACTICE PROBLEM 9</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introduction-to-web-scraping-in-r.html"><a href="introduction-to-web-scraping-in-r.html"><i class="fa fa-check"></i><b>2</b> Introduction to web scraping in R</a>
<ul>
<li class="chapter" data-level="2.1" data-path="introduction-to-web-scraping-in-r.html"><a href="introduction-to-web-scraping-in-r.html#some-preliminaries-about-websites-scraping-and-crawling"><i class="fa fa-check"></i><b>2.1</b> Some preliminaries: about websites, scraping, and crawling</a></li>
<li class="chapter" data-level="2.2" data-path="introduction-to-web-scraping-in-r.html"><a href="introduction-to-web-scraping-in-r.html#getting-our-tools-ready"><i class="fa fa-check"></i><b>2.2</b> Getting our tools ready</a></li>
<li class="chapter" data-level="2.3" data-path="introduction-to-web-scraping-in-r.html"><a href="introduction-to-web-scraping-in-r.html#getting-to-know-the-target-website"><i class="fa fa-check"></i><b>2.3</b> Getting to know the target website</a></li>
<li class="chapter" data-level="2.4" data-path="introduction-to-web-scraping-in-r.html"><a href="introduction-to-web-scraping-in-r.html#are-we-allowed-to-scrape"><i class="fa fa-check"></i><b>2.4</b> Are we allowed to scrape?</a></li>
<li class="chapter" data-level="2.5" data-path="introduction-to-web-scraping-in-r.html"><a href="introduction-to-web-scraping-in-r.html#making-a-plan"><i class="fa fa-check"></i><b>2.5</b> Making a plan</a></li>
<li class="chapter" data-level="2.6" data-path="introduction-to-web-scraping-in-r.html"><a href="introduction-to-web-scraping-in-r.html#locating-the-correct-information"><i class="fa fa-check"></i><b>2.6</b> Locating the correct information</a></li>
<li class="chapter" data-level="2.7" data-path="introduction-to-web-scraping-in-r.html"><a href="introduction-to-web-scraping-in-r.html#building-the-scraper"><i class="fa fa-check"></i><b>2.7</b> Building the scraper</a>
<ul>
<li class="chapter" data-level="2.7.1" data-path="introduction-to-web-scraping-in-r.html"><a href="introduction-to-web-scraping-in-r.html#first-steps"><i class="fa fa-check"></i><b>2.7.1</b> First steps</a></li>
<li class="chapter" data-level="2.7.2" data-path="introduction-to-web-scraping-in-r.html"><a href="introduction-to-web-scraping-in-r.html#automating-the-process-getting-multiple-pages"><i class="fa fa-check"></i><b>2.7.2</b> Automating the process: getting multiple pages</a></li>
</ul></li>
<li class="chapter" data-level="2.8" data-path="introduction-to-web-scraping-in-r.html"><a href="introduction-to-web-scraping-in-r.html#answering-the-research-question"><i class="fa fa-check"></i><b>2.8</b> Answering the research question</a>
<ul>
<li class="chapter" data-level="2.8.1" data-path="introduction-to-web-scraping-in-r.html"><a href="introduction-to-web-scraping-in-r.html#collecting-the-data"><i class="fa fa-check"></i><b>2.8.1</b> Collecting the data</a></li>
<li class="chapter" data-level="2.8.2" data-path="introduction-to-web-scraping-in-r.html"><a href="introduction-to-web-scraping-in-r.html#analyzing-the-data"><i class="fa fa-check"></i><b>2.8.2</b> Analyzing the data</a></li>
</ul></li>
<li class="chapter" data-level="2.9" data-path="introduction-to-web-scraping-in-r.html"><a href="introduction-to-web-scraping-in-r.html#extensions"><i class="fa fa-check"></i><b>2.9</b> Extensions</a>
<ul>
<li class="chapter" data-level="2.9.1" data-path="introduction-to-web-scraping-in-r.html"><a href="introduction-to-web-scraping-in-r.html#more-ethically-robust-web-scraping-with-polite"><i class="fa fa-check"></i><b>2.9.1</b> More ethically robust web scraping with <code>polite</code></a></li>
<li class="chapter" data-level="2.9.2" data-path="introduction-to-web-scraping-in-r.html"><a href="introduction-to-web-scraping-in-r.html#scraping-dynamic-websites-with-rselenium"><i class="fa fa-check"></i><b>2.9.2</b> Scraping dynamic websites with <code>RSelenium</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="collecting-data-through-apis-the-case-of-reddit.html"><a href="collecting-data-through-apis-the-case-of-reddit.html"><i class="fa fa-check"></i><b>3</b> Collecting data through APIs: the case of Reddit</a>
<ul>
<li class="chapter" data-level="3.1" data-path="collecting-data-through-apis-the-case-of-reddit.html"><a href="collecting-data-through-apis-the-case-of-reddit.html#introduction-1"><i class="fa fa-check"></i><b>3.1</b> Introduction</a></li>
<li class="chapter" data-level="3.2" data-path="collecting-data-through-apis-the-case-of-reddit.html"><a href="collecting-data-through-apis-the-case-of-reddit.html#loading-the-tools"><i class="fa fa-check"></i><b>3.2</b> Loading the tools</a></li>
<li class="chapter" data-level="3.3" data-path="collecting-data-through-apis-the-case-of-reddit.html"><a href="collecting-data-through-apis-the-case-of-reddit.html#case-study-reddit"><i class="fa fa-check"></i><b>3.3</b> Case study: Reddit</a></li>
<li class="chapter" data-level="3.4" data-path="collecting-data-through-apis-the-case-of-reddit.html"><a href="collecting-data-through-apis-the-case-of-reddit.html#accessing-data-via-the-api"><i class="fa fa-check"></i><b>3.4</b> Accessing data via the API</a></li>
<li class="chapter" data-level="3.5" data-path="collecting-data-through-apis-the-case-of-reddit.html"><a href="collecting-data-through-apis-the-case-of-reddit.html#getting-the-data-with-redditextractor"><i class="fa fa-check"></i><b>3.5</b> Getting the data with RedditExtractoR</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="collecting-data-through-apis-the-case-of-reddit.html"><a href="collecting-data-through-apis-the-case-of-reddit.html#getting-threads"><i class="fa fa-check"></i><b>3.5.1</b> Getting threads</a></li>
<li class="chapter" data-level="3.5.2" data-path="collecting-data-through-apis-the-case-of-reddit.html"><a href="collecting-data-through-apis-the-case-of-reddit.html#getting-contents-of-threads"><i class="fa fa-check"></i><b>3.5.2</b> Getting contents of threads</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="collecting-data-through-apis-the-case-of-reddit.html"><a href="collecting-data-through-apis-the-case-of-reddit.html#creating-a-network"><i class="fa fa-check"></i><b>3.6</b> Creating a network</a></li>
<li class="chapter" data-level="3.7" data-path="collecting-data-through-apis-the-case-of-reddit.html"><a href="collecting-data-through-apis-the-case-of-reddit.html#analyzing-content-simple-sentiment-analysis"><i class="fa fa-check"></i><b>3.7</b> Analyzing content: simple sentiment analysis</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="a-first-look-at-data-collection-via-the-bluesky-api.html"><a href="a-first-look-at-data-collection-via-the-bluesky-api.html"><i class="fa fa-check"></i><b>4</b> A first look at data collection via the Bluesky API</a>
<ul>
<li class="chapter" data-level="4.1" data-path="a-first-look-at-data-collection-via-the-bluesky-api.html"><a href="a-first-look-at-data-collection-via-the-bluesky-api.html#introduction-2"><i class="fa fa-check"></i><b>4.1</b> Introduction</a></li>
<li class="chapter" data-level="4.2" data-path="a-first-look-at-data-collection-via-the-bluesky-api.html"><a href="a-first-look-at-data-collection-via-the-bluesky-api.html#prerequisites"><i class="fa fa-check"></i><b>4.2</b> Prerequisites</a></li>
<li class="chapter" data-level="4.3" data-path="a-first-look-at-data-collection-via-the-bluesky-api.html"><a href="a-first-look-at-data-collection-via-the-bluesky-api.html#loading-the-packages"><i class="fa fa-check"></i><b>4.3</b> Loading the packages</a></li>
<li class="chapter" data-level="4.4" data-path="a-first-look-at-data-collection-via-the-bluesky-api.html"><a href="a-first-look-at-data-collection-via-the-bluesky-api.html#getting-started-authenticating"><i class="fa fa-check"></i><b>4.4</b> Getting started: authenticating</a></li>
<li class="chapter" data-level="4.5" data-path="a-first-look-at-data-collection-via-the-bluesky-api.html"><a href="a-first-look-at-data-collection-via-the-bluesky-api.html#getting-data"><i class="fa fa-check"></i><b>4.5</b> Getting data</a></li>
<li class="chapter" data-level="4.6" data-path="a-first-look-at-data-collection-via-the-bluesky-api.html"><a href="a-first-look-at-data-collection-via-the-bluesky-api.html#working-with-the-data"><i class="fa fa-check"></i><b>4.6</b> Working with the data</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="analyzing-experimental-data.html"><a href="analyzing-experimental-data.html"><i class="fa fa-check"></i><b>5</b> Analyzing experimental data</a>
<ul>
<li class="chapter" data-level="5.1" data-path="analyzing-experimental-data.html"><a href="analyzing-experimental-data.html#introduction-3"><i class="fa fa-check"></i><b>5.1</b> Introduction</a></li>
<li class="chapter" data-level="5.2" data-path="analyzing-experimental-data.html"><a href="analyzing-experimental-data.html#replicating-the-results"><i class="fa fa-check"></i><b>5.2</b> Replicating the results</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="extra-data-manipulation-and-analysis-with-r.html"><a href="extra-data-manipulation-and-analysis-with-r.html"><i class="fa fa-check"></i><b>6</b> Extra: Data manipulation and analysis with R</a>
<ul>
<li class="chapter" data-level="6.1" data-path="extra-data-manipulation-and-analysis-with-r.html"><a href="extra-data-manipulation-and-analysis-with-r.html#introduction-4"><i class="fa fa-check"></i><b>6.1</b> Introduction</a></li>
<li class="chapter" data-level="6.2" data-path="extra-data-manipulation-and-analysis-with-r.html"><a href="extra-data-manipulation-and-analysis-with-r.html#preparation"><i class="fa fa-check"></i><b>6.2</b> Preparation</a></li>
<li class="chapter" data-level="6.3" data-path="extra-data-manipulation-and-analysis-with-r.html"><a href="extra-data-manipulation-and-analysis-with-r.html#data-preparation-with-base-r"><i class="fa fa-check"></i><b>6.3</b> Data preparation with base R</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="extra-data-manipulation-and-analysis-with-r.html"><a href="extra-data-manipulation-and-analysis-with-r.html#subsetting"><i class="fa fa-check"></i><b>6.3.1</b> Subsetting</a></li>
<li class="chapter" data-level="6.3.2" data-path="extra-data-manipulation-and-analysis-with-r.html"><a href="extra-data-manipulation-and-analysis-with-r.html#sorting"><i class="fa fa-check"></i><b>6.3.2</b> Sorting</a></li>
<li class="chapter" data-level="6.3.3" data-path="extra-data-manipulation-and-analysis-with-r.html"><a href="extra-data-manipulation-and-analysis-with-r.html#transformation"><i class="fa fa-check"></i><b>6.3.3</b> Transformation</a></li>
<li class="chapter" data-level="6.3.4" data-path="extra-data-manipulation-and-analysis-with-r.html"><a href="extra-data-manipulation-and-analysis-with-r.html#creating-new-variables"><i class="fa fa-check"></i><b>6.3.4</b> Creating new variables</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="extra-data-manipulation-and-analysis-with-r.html"><a href="extra-data-manipulation-and-analysis-with-r.html#data-manipulation-using-tidyverse"><i class="fa fa-check"></i><b>6.4</b> Data manipulation using Tidyverse</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="extra-data-manipulation-and-analysis-with-r.html"><a href="extra-data-manipulation-and-analysis-with-r.html#installing-tidyverse"><i class="fa fa-check"></i><b>6.4.1</b> Installing tidyverse</a></li>
<li class="chapter" data-level="6.4.2" data-path="extra-data-manipulation-and-analysis-with-r.html"><a href="extra-data-manipulation-and-analysis-with-r.html#tidyverse-basics"><i class="fa fa-check"></i><b>6.4.2</b> Tidyverse basics</a></li>
<li class="chapter" data-level="6.4.3" data-path="extra-data-manipulation-and-analysis-with-r.html"><a href="extra-data-manipulation-and-analysis-with-r.html#practice-problem-4-1"><i class="fa fa-check"></i><b>6.4.3</b> PRACTICE PROBLEM 4</a></li>
<li class="chapter" data-level="6.4.4" data-path="extra-data-manipulation-and-analysis-with-r.html"><a href="extra-data-manipulation-and-analysis-with-r.html#reading-data"><i class="fa fa-check"></i><b>6.4.4</b> Reading data</a></li>
<li class="chapter" data-level="6.4.5" data-path="extra-data-manipulation-and-analysis-with-r.html"><a href="extra-data-manipulation-and-analysis-with-r.html#subsetting-with-filter"><i class="fa fa-check"></i><b>6.4.5</b> Subsetting with filter()</a></li>
<li class="chapter" data-level="6.4.6" data-path="extra-data-manipulation-and-analysis-with-r.html"><a href="extra-data-manipulation-and-analysis-with-r.html#selecting-certain-columns"><i class="fa fa-check"></i><b>6.4.6</b> Selecting certain columns</a></li>
<li class="chapter" data-level="6.4.7" data-path="extra-data-manipulation-and-analysis-with-r.html"><a href="extra-data-manipulation-and-analysis-with-r.html#sorting-with-arrange"><i class="fa fa-check"></i><b>6.4.7</b> Sorting with arrange()</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="extra-data-manipulation-and-analysis-with-r.html"><a href="extra-data-manipulation-and-analysis-with-r.html#adding-or-transforming-variables-with-mutate"><i class="fa fa-check"></i><b>6.5</b> Adding or transforming variables with mutate()</a></li>
<li class="chapter" data-level="6.6" data-path="extra-data-manipulation-and-analysis-with-r.html"><a href="extra-data-manipulation-and-analysis-with-r.html#working-with-pipes"><i class="fa fa-check"></i><b>6.6</b> Working with Pipes</a>
<ul>
<li class="chapter" data-level="6.6.1" data-path="extra-data-manipulation-and-analysis-with-r.html"><a href="extra-data-manipulation-and-analysis-with-r.html#data-summarization"><i class="fa fa-check"></i><b>6.6.1</b> Data Summarization</a></li>
<li class="chapter" data-level="6.6.2" data-path="extra-data-manipulation-and-analysis-with-r.html"><a href="extra-data-manipulation-and-analysis-with-r.html#ungrouping"><i class="fa fa-check"></i><b>6.6.2</b> Ungrouping</a></li>
<li class="chapter" data-level="6.6.3" data-path="extra-data-manipulation-and-analysis-with-r.html"><a href="extra-data-manipulation-and-analysis-with-r.html#practice-problem-6-1"><i class="fa fa-check"></i><b>6.6.3</b> PRACTICE PROBLEM 6</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Social Research in the Digital Age (Utrecht University)</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="collecting-data-through-apis-the-case-of-reddit" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">3</span> Collecting data through APIs: the case of Reddit<a href="collecting-data-through-apis-the-case-of-reddit.html#collecting-data-through-apis-the-case-of-reddit" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="introduction-1" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> Introduction<a href="collecting-data-through-apis-the-case-of-reddit.html#introduction-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In this tutorial, we will look at collecting data about human behavior using <em>API access</em>. As an example, we will collect some data from Reddit, the popular online discussion platform.</p>
<p>API stands for “application programming interface”, and in general, it is a way in which software applications communicate with each other (instead of with a human user). In the context of websites, <em>web APIs</em> provide means for software applications to access data on web servers. Consider, for example, a smartphone app that allows you to read and post messages on your profile on a social media website such as Facebook. To be able to do so, such an app must be able to communicate with the Facebook server, access information on the server, and send information to the server. For this purpose, Facebook provides an API so that third-party apps can interact with their data. Similarly, a news website that displays the latest “X” (formerly Twitter) trends obtains that information via the X API. In a way, an API is an official “back door” to an application or website designed for other applications or websites; you may compare it with a restaurant that has a front door for guests (in the case of a website: for users) and back door specifically for delivery and employees.</p>
<p>In many cases, APIs may also be used for research as they allow researchers to access data stored on web server of interest, such as the web servers of social media services. <em>Web scraping</em> may also be used to access similar data, but there are a number of important differences:</p>
<ul>
<li><p>As opposed to web scraping, API usage is strictly <strong>regulated</strong> by the application or website that offers it. That is, the provider of the API determines who can access the API, for what purposes, and under what conditions. Often (but not always), an API requires API users to authenticate in one way or another and to agree to terms and conditions. Sometimes this prevents researchers from using data freely, even if the data are in principle accessible through the API.</p></li>
<li><p>Nevertheless, as long as you stick to these terms and conditions, getting data from an API implies that you are using the data with <strong>permission</strong> of the provider, which is not always the case with scraped data. This, however, does not mean that there are never ethical concerns with the use of API data! After all, the individuals who’s data you collect (e.g., social media users) may not agree with your use of the data. This is not different from scraped data.</p></li>
<li><p>As opposed to scraped data, API-provided data are much more <strong>structured</strong>, precisely because they are meant to be used. More on that later.</p></li>
<li><p>A web scraper is typically custom-build by a researcher to collect data from a specific website. In contrast, the technical procedures required to collect API data are much more determined by the provider of the data, allowing for <strong>less control</strong> by the researcher.</p></li>
</ul>
</div>
<div id="loading-the-tools" class="section level2 hasAnchor" number="3.2">
<h2><span class="header-section-number">3.2</span> Loading the tools<a href="collecting-data-through-apis-the-case-of-reddit.html#loading-the-tools" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>As before, we’re using a few specific packages for this task. Start a new R-script and copy-paste the below lines to load these packages. In this case, we haven’t included the <code>install.packages()</code> command; since you may already have installed some of these packages before, it’s not efficient to re-install them every time. Thus, if you get a warning like:</p>
<pre><code>There is no package called ...</code></pre>
<p>you need to install that package first using <code>install.packages()</code> like before (we don’t include that code here). Then, we load the packages:</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="collecting-data-through-apis-the-case-of-reddit.html#cb70-1" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list=</span><span class="fu">ls</span>()) <span class="co"># Start with a clean workspace</span></span>
<span id="cb70-2"><a href="collecting-data-through-apis-the-case-of-reddit.html#cb70-2" tabindex="-1"></a><span class="fu">library</span>(RedditExtractoR)</span>
<span id="cb70-3"><a href="collecting-data-through-apis-the-case-of-reddit.html#cb70-3" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb70-4"><a href="collecting-data-through-apis-the-case-of-reddit.html#cb70-4" tabindex="-1"></a><span class="fu">library</span>(igraph)</span>
<span id="cb70-5"><a href="collecting-data-through-apis-the-case-of-reddit.html#cb70-5" tabindex="-1"></a><span class="fu">library</span>(sentimentr)</span></code></pre></div>
</div>
<div id="case-study-reddit" class="section level2 hasAnchor" number="3.3">
<h2><span class="header-section-number">3.3</span> Case study: Reddit<a href="collecting-data-through-apis-the-case-of-reddit.html#case-study-reddit" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Many websites have APIs, and some of them have been extensively used for research, in particular the Twitter API. However, since spring 2023, Twitter (X) no longer provides free access to their API. One of the platforms that still provides access is <a href="https://www.reddit.com/">Reddit</a>, although Reddit also implemented some <a href="https://en.wikipedia.org/wiki/2023_Reddit_API_controversy">controversial changes</a> recently . If you’re not familiar with Reddit, please visit the website and browse around a bit (try to find your favorite topics) to make yourself familiar with how it works. In particular, pay attention to:</p>
<ul>
<li><p>What is a “subreddit”?</p></li>
<li><p>What is the main purpose (or purposes) of the platform?</p></li>
<li><p>What are the main properties of “posts”?</p></li>
<li><p>What are the different ways in which users can interact with the platform (i.e., what are the actions available to users)?</p></li>
</ul>
</div>
<div id="accessing-data-via-the-api" class="section level2 hasAnchor" number="3.4">
<h2><span class="header-section-number">3.4</span> Accessing data via the API<a href="collecting-data-through-apis-the-case-of-reddit.html#accessing-data-via-the-api" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>To get data from the API, we can use specific URLs that provide us with the data we want. Instead of a readable webpages, these URLs provide data based on what we specify. For example, to download a list of threads, we could specify the following:</p>
<pre><code>https://www.reddit.com/r/{subreddit}/{listing}.json?limit={count}&amp;t={timeframe}</code></pre>
<p>Where:</p>
<dl>
<dt>{subreddit}</dt>
<dd>
<p>The name of the subreddit we want to access;</p>
</dd>
<dt>{listing}</dt>
<dd>
<p>Determines the order of the list: “controversial”, “best”, “hot”, “new”, “random”, “rising”, or “top”;</p>
</dd>
<dt>{limit}</dt>
<dd>
<p>The number of desired results;</p>
</dd>
<dt>{timeframe}</dt>
<dd>
<p>The time frame to which {listing} applies: “hour”, “day”, “week”, “month”, “year”, “all” (i.e., the top posts of the past month).</p>
</dd>
</dl>
<p>In other words, the URL above says “please give me {limit} {listing} threads from the past {timeframe} from subreddit {subreddit}.</p>
<p><strong>Question:</strong> consider <a href="https://www.reddit.com/r/climate/new.json?limit=1&amp;t=all" class="uri">https://www.reddit.com/r/climate/new.json?limit=1&amp;t=all</a>. What are we requesting here (i.e., what are {subreddit}, {listing}, {limit} and {timeframe}?</p>
<p><strong>Question:</strong> Now go to <a href="https://www.reddit.com/r/climate" class="uri">https://www.reddit.com/r/climate</a>. Which information here corresponds with what we requested in the previous question?</p>
<p>Now click on <a href="https://www.reddit.com/r/climate/new.json?limit=1&amp;t=all" class="uri">https://www.reddit.com/r/climate/new.json?limit=1&amp;t=all</a>. What you see here is indeed not a nicely formatted website, but a whole lot of data. The data are structured using the <a href="https://en.wikipedia.org/wiki/JSON">JSON</a> format, which is a common format for exchanging data online. This is a key difference between using an API and typical web scraping: in the latter case, the data are somwhere on a website that is designed to be human-readable, and we have to somehow filter out the relevant information; via the API data are already provided in a nicely structured way, and are <em>intended to be used</em>.</p>
<p><strong>Question:</strong> Identify the the following information in the JSON file you see in your browser: the title of the post, the name of its author, the current number of comments, and the date/time of posting.</p>
<p>We could easily download the JSON data into R using a simple command like this (copy and paste into your R script and run it; ignore the warning):</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="collecting-data-through-apis-the-case-of-reddit.html#cb72-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">readLines</span>(<span class="st">&quot;https://www.reddit.com/r/climate/new.json?limit=1&amp;t=all&quot;</span>)</span></code></pre></div>
<p>Subsequently we can run</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="collecting-data-through-apis-the-case-of-reddit.html#cb73-1" tabindex="-1"></a>x</span></code></pre></div>
<p>to view the data (try it), but the result is still quite messy. We could parse the data using R’s built-in JSON tools, but fortunately there is also an R-package specifically for Reddit that makes getting data from the Reddit API into R much more user-friendly. It’s called RedditExtractoR and we’ve already loaded it above.</p>
</div>
<div id="getting-the-data-with-redditextractor" class="section level2 hasAnchor" number="3.5">
<h2><span class="header-section-number">3.5</span> Getting the data with RedditExtractoR<a href="collecting-data-through-apis-the-case-of-reddit.html#getting-the-data-with-redditextractor" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="getting-threads" class="section level3 hasAnchor" number="3.5.1">
<h3><span class="header-section-number">3.5.1</span> Getting threads<a href="collecting-data-through-apis-the-case-of-reddit.html#getting-threads" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>As a first step, we download all the threads in the Subreddit. All? Not all. It seems actually unclear how many one can download. Choosing “new” and “all” seems to give a relatively large (and sensible) result.</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="collecting-data-through-apis-the-case-of-reddit.html#cb74-1" tabindex="-1"></a>threads <span class="ot">&lt;-</span> <span class="fu">find_thread_urls</span>(<span class="at">subreddit=</span><span class="st">&quot;climate&quot;</span>, <span class="at">sort_by=</span><span class="st">&quot;new&quot;</span>, <span class="at">period =</span> <span class="st">&quot;all&quot;</span>)</span></code></pre></div>
<p>Take a look at the resulting data frame (click on “threads” in the environment tab in the top right corner.</p>
<p><strong>Question:</strong> How many threads have we downloaded? Which variables are available about each thread? Which thread is the thread that received most comments in these data?</p>
<p><strong>Question:</strong> Make a histogram of the number of comments. (Hint: look up the code for the histogram that we made in the previous tutorial.)</p>
</div>
<div id="getting-contents-of-threads" class="section level3 hasAnchor" number="3.5.2">
<h3><span class="header-section-number">3.5.2</span> Getting contents of threads<a href="collecting-data-through-apis-the-case-of-reddit.html#getting-contents-of-threads" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In the next step, we download the contents of these threads. Let’s take only a randomly chosen 50 for simplicity. Note that it is normal that the below code takes a bit of time to run.</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="collecting-data-through-apis-the-case-of-reddit.html#cb75-1" tabindex="-1"></a>thread_contents <span class="ot">&lt;-</span> threads<span class="sc">$</span>url  <span class="co"># start with the urls from the threads data frame</span></span>
<span id="cb75-2"><a href="collecting-data-through-apis-the-case-of-reddit.html#cb75-2" tabindex="-1"></a>thread_contents <span class="ot">&lt;-</span>  <span class="fu">sample</span>(thread_contents, <span class="dv">50</span>) <span class="co"># randomly sample 50</span></span>
<span id="cb75-3"><a href="collecting-data-through-apis-the-case-of-reddit.html#cb75-3" tabindex="-1"></a>thread_contents <span class="ot">&lt;-</span>  <span class="fu">get_thread_content</span>(thread_contents)</span></code></pre></div>
<p>The resulting object contains two data frames: “threads” and “comments”. The first contains data on the thread as a whole (such as the url, who started it and when, the number of comments, the content of the original post, etc. ). The second contains data of all the comments. Some important variables in “comments” are:</p>
<dl>
<dt>url</dt>
<dd>
<p>the url of the thread that the comment belongs to. This matches the urls in the “threads” data frame in “thread_contents”.</p>
</dd>
<dt>author</dt>
<dd>
<p>The author of the comment</p>
</dd>
<dt>comment_id</dt>
<dd>
<p>The position of the comment in the “tree” of the thread. “1” is the first comment to the original post, “2” is the second, etc. “1_1” is then the first comment to the first comment to the original post, etc.</p>
</dd>
</dl>
<p>We can take the data frame with comments from the <code>threads_contents</code> object and turn it into its own data frame as follows:</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="collecting-data-through-apis-the-case-of-reddit.html#cb76-1" tabindex="-1"></a>comments <span class="ot">&lt;-</span> thread_contents<span class="sc">$</span>comments</span></code></pre></div>
<p><strong>Question:</strong> How many comments are there in total?</p>
<p><strong>Question:</strong> Which comment is the most “upvoted” comment?</p>
<p><strong>Question:</strong> The paper by <a href="https://www.tandfonline.com/doi/full/10.1080/17524032.2022.2050776">Treen et al. (2022)</a> used text analysis techniques such as <em>topic modeling</em> in their analysis of polarization on Reddit. Of the data that we have now collected, what do you think they used?</p>
</div>
</div>
<div id="creating-a-network" class="section level2 hasAnchor" number="3.6">
<h2><span class="header-section-number">3.6</span> Creating a network<a href="collecting-data-through-apis-the-case-of-reddit.html#creating-a-network" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The paper by <a href="https://www.tandfonline.com/doi/full/10.1080/17524032.2022.2050776">Treen et al. (2022)</a> aims to assess polarization by, among other things, studying the “reply network” in Subreddits.</p>
<p><strong>Question:</strong> how do they construct this network, that is, what are the links? And how do they assess the level of polarization?</p>
<p>We can partly reproduce their analysis (for “our” Subreddit) using the code below. While this is relatively complicated, see of you can get the gist of what happens. Then, copy-paste and run the code.</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="collecting-data-through-apis-the-case-of-reddit.html#cb77-1" tabindex="-1"></a>authors <span class="ot">&lt;-</span> <span class="fu">select</span>(thread_contents<span class="sc">$</span>threads, author, url) <span class="co"># Get the &quot;threads&quot; part of the threat_contents object,  keep only the author and url for each thread</span></span>
<span id="cb77-2"><a href="collecting-data-through-apis-the-case-of-reddit.html#cb77-2" tabindex="-1"></a></span>
<span id="cb77-3"><a href="collecting-data-through-apis-the-case-of-reddit.html#cb77-3" tabindex="-1"></a>responders <span class="ot">&lt;-</span> <span class="fu">select</span>(thread_contents<span class="sc">$</span>comments, author, url) <span class="co"># Get the &quot;comments&quot; part of the threat_contents object  and keep only the author and url for each thread</span></span>
<span id="cb77-4"><a href="collecting-data-through-apis-the-case-of-reddit.html#cb77-4" tabindex="-1"></a></span>
<span id="cb77-5"><a href="collecting-data-through-apis-the-case-of-reddit.html#cb77-5" tabindex="-1"></a>responders <span class="ot">&lt;-</span> <span class="fu">rename</span>(responders, <span class="at">responder =</span> author) <span class="co"># rename &quot;author&quot; to &quot;responder&quot;</span></span>
<span id="cb77-6"><a href="collecting-data-through-apis-the-case-of-reddit.html#cb77-6" tabindex="-1"></a></span>
<span id="cb77-7"><a href="collecting-data-through-apis-the-case-of-reddit.html#cb77-7" tabindex="-1"></a></span>
<span id="cb77-8"><a href="collecting-data-through-apis-the-case-of-reddit.html#cb77-8" tabindex="-1"></a><span class="co"># now match these two together, using the url as the matching variable</span></span>
<span id="cb77-9"><a href="collecting-data-through-apis-the-case-of-reddit.html#cb77-9" tabindex="-1"></a>reply_net  <span class="ot">&lt;-</span> <span class="fu">merge</span>(authors, responders, <span class="at">by =</span> <span class="st">&quot;url&quot;</span>)</span>
<span id="cb77-10"><a href="collecting-data-through-apis-the-case-of-reddit.html#cb77-10" tabindex="-1"></a>reply_net <span class="ot">&lt;-</span> <span class="fu">select</span>(reply_net, author, responder) <span class="co"># keep only the author and responder vars</span></span>
<span id="cb77-11"><a href="collecting-data-through-apis-the-case-of-reddit.html#cb77-11" tabindex="-1"></a>reply_net <span class="ot">&lt;-</span> <span class="fu">graph_from_data_frame</span>(reply_net) <span class="co"># turn this into a &quot;network object&quot;: something the igraph package for network analysis can work with</span></span>
<span id="cb77-12"><a href="collecting-data-through-apis-the-case-of-reddit.html#cb77-12" tabindex="-1"></a></span>
<span id="cb77-13"><a href="collecting-data-through-apis-the-case-of-reddit.html#cb77-13" tabindex="-1"></a><span class="co"># plot the network</span></span>
<span id="cb77-14"><a href="collecting-data-through-apis-the-case-of-reddit.html#cb77-14" tabindex="-1"></a><span class="fu">plot</span>(reply_net,</span>
<span id="cb77-15"><a href="collecting-data-through-apis-the-case-of-reddit.html#cb77-15" tabindex="-1"></a>     <span class="at">vertex.label=</span><span class="cn">NA</span>,</span>
<span id="cb77-16"><a href="collecting-data-through-apis-the-case-of-reddit.html#cb77-16" tabindex="-1"></a>     <span class="at">vertex.color =</span> <span class="st">&quot;blue&quot;</span>,</span>
<span id="cb77-17"><a href="collecting-data-through-apis-the-case-of-reddit.html#cb77-17" tabindex="-1"></a>     <span class="at">vertex.size =</span> <span class="dv">5</span>,</span>
<span id="cb77-18"><a href="collecting-data-through-apis-the-case-of-reddit.html#cb77-18" tabindex="-1"></a>     <span class="at">edge.arrow.size =</span> <span class="fl">0.2</span>,</span>
<span id="cb77-19"><a href="collecting-data-through-apis-the-case-of-reddit.html#cb77-19" tabindex="-1"></a>     <span class="at">edge.color =</span> <span class="st">&quot;black&quot;</span>,</span>
<span id="cb77-20"><a href="collecting-data-through-apis-the-case-of-reddit.html#cb77-20" tabindex="-1"></a>     <span class="at">graph.frame =</span> <span class="cn">TRUE</span>,</span>
<span id="cb77-21"><a href="collecting-data-through-apis-the-case-of-reddit.html#cb77-21" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">&quot;The reply network of 50 random threads on r/climate&quot;</span></span>
<span id="cb77-22"><a href="collecting-data-through-apis-the-case-of-reddit.html#cb77-22" tabindex="-1"></a>     )</span></code></pre></div>
<p>Note that Treen et al.’s network analysis is somewhat more elaborate; for instance, they use a technique called <a href="https://people.duke.edu/~jmoody77/snh/2021/CommunitiesSNH2021.nb.html">community detection</a> to highlight different subgroups in the network, which we don’t do here for simplicity. Nevertheless, we can still try to assess the polarization of the network loosely by looking at the structure.</p>
<p><strong>Question:</strong> what would you conclude about polarization in this Subreddit?</p>
</div>
<div id="analyzing-content-simple-sentiment-analysis" class="section level2 hasAnchor" number="3.7">
<h2><span class="header-section-number">3.7</span> Analyzing content: simple sentiment analysis<a href="collecting-data-through-apis-the-case-of-reddit.html#analyzing-content-simple-sentiment-analysis" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Besides the structure of the network, we can also analyze the content of the comments. One (relatively) simple way to do this is to perform a sentiment analysis. This is a technique that tries to determine whether a piece of text is positive, negative, or neutral, based on a “dictionary” which assigns positive, neutral or negative sentiments to each work. We can use the `sentimentr’ package for this (already loaded above).</p>
<p>One question that we could address is how average sentiments in the comments vary over time. The code below does this for the comments in the data that we collected:</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="collecting-data-through-apis-the-case-of-reddit.html#cb78-1" tabindex="-1"></a><span class="co"># create a data frame of comments from thread_contents$comments </span></span>
<span id="cb78-2"><a href="collecting-data-through-apis-the-case-of-reddit.html#cb78-2" tabindex="-1"></a></span>
<span id="cb78-3"><a href="collecting-data-through-apis-the-case-of-reddit.html#cb78-3" tabindex="-1"></a>comments <span class="ot">&lt;-</span> thread_contents<span class="sc">$</span>comments</span>
<span id="cb78-4"><a href="collecting-data-through-apis-the-case-of-reddit.html#cb78-4" tabindex="-1"></a></span>
<span id="cb78-5"><a href="collecting-data-through-apis-the-case-of-reddit.html#cb78-5" tabindex="-1"></a><span class="co"># Do the sentiment analysis, storing the results in the object &quot;sentiments&quot; </span></span>
<span id="cb78-6"><a href="collecting-data-through-apis-the-case-of-reddit.html#cb78-6" tabindex="-1"></a>sentiments <span class="ot">&lt;-</span> <span class="fu">sentiment_by</span>(comments<span class="sc">$</span>comment)</span>
<span id="cb78-7"><a href="collecting-data-through-apis-the-case-of-reddit.html#cb78-7" tabindex="-1"></a></span>
<span id="cb78-8"><a href="collecting-data-through-apis-the-case-of-reddit.html#cb78-8" tabindex="-1"></a><span class="co"># Add the average sentiment of each comment to the comments data frame</span></span>
<span id="cb78-9"><a href="collecting-data-through-apis-the-case-of-reddit.html#cb78-9" tabindex="-1"></a>comments<span class="sc">$</span>sentiment <span class="ot">&lt;-</span> sentiments<span class="sc">$</span>ave_sentiment</span>
<span id="cb78-10"><a href="collecting-data-through-apis-the-case-of-reddit.html#cb78-10" tabindex="-1"></a></span>
<span id="cb78-11"><a href="collecting-data-through-apis-the-case-of-reddit.html#cb78-11" tabindex="-1"></a></span>
<span id="cb78-12"><a href="collecting-data-through-apis-the-case-of-reddit.html#cb78-12" tabindex="-1"></a><span class="co"># plot the average sentiment per day</span></span>
<span id="cb78-13"><a href="collecting-data-through-apis-the-case-of-reddit.html#cb78-13" tabindex="-1"></a>comments <span class="sc">%&gt;%</span></span>
<span id="cb78-14"><a href="collecting-data-through-apis-the-case-of-reddit.html#cb78-14" tabindex="-1"></a>  <span class="fu">group_by</span>(date) <span class="sc">%&gt;%</span></span>
<span id="cb78-15"><a href="collecting-data-through-apis-the-case-of-reddit.html#cb78-15" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">ave_sentiment =</span> <span class="fu">mean</span>(sentiment)) <span class="sc">%&gt;%</span></span>
<span id="cb78-16"><a href="collecting-data-through-apis-the-case-of-reddit.html#cb78-16" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> date, <span class="at">y =</span> ave_sentiment, <span class="at">group =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb78-17"><a href="collecting-data-through-apis-the-case-of-reddit.html#cb78-17" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb78-18"><a href="collecting-data-through-apis-the-case-of-reddit.html#cb78-18" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb78-19"><a href="collecting-data-through-apis-the-case-of-reddit.html#cb78-19" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Average sentiment of comments per day&quot;</span>,</span>
<span id="cb78-20"><a href="collecting-data-through-apis-the-case-of-reddit.html#cb78-20" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Time&quot;</span>,</span>
<span id="cb78-21"><a href="collecting-data-through-apis-the-case-of-reddit.html#cb78-21" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Sentiment&quot;</span>)  <span class="sc">+</span></span>
<span id="cb78-22"><a href="collecting-data-through-apis-the-case-of-reddit.html#cb78-22" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span></code></pre></div>
<p><strong>Question:</strong> Now pick another Subreddit on a topic that you find interesting, and try to make a network graph and do a simple sentiment analysis for this Subreddit as well. (Hint: you can reuse most of the code we’ve used above.)</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="introduction-to-web-scraping-in-r.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="a-first-look-at-data-collection-via-the-bluesky-api.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
